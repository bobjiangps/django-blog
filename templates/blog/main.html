{% extends 'blog/base.html' %}

{% block content %}
  <!-- post list -->
  <div class="container" style="margin-top: 20px;">
      <span class="separator">
          <i class="fas fa-fire"></i> 查看次数最多
      </span>
      <hr width="60%" style="border:2px solid #BDB76B;"/>
      <div class="row">
          {% for post in posts %}
          <div class="col-lg-4 mb-4">
          {% if post.visiable.name != 'private' or user.is_authenticated %}
              <div class="card h-100">
                  <div class="card-header">
                      {{ post.created_date|date }} - {{post.author}} &ensp;
                      <span class='comment-count'>{{ post.comment_set.count }} 评论</span> &ensp;
                      <span class='view-count'>{{ post.views }} 阅读</span>
                  </div>
                  <div class="card-body">
                      {% if post.visiable.name == 'private' %}
                        <h3><a href="{% url 'post_detail' post.id %}">[private] - {{ post.title }}</a></h3>
                      {% else %}
                        <h3><a href="{% url 'post_detail' post.id %}">{{ post.title }}</a><h3>
                      {% endif %}
                      <h6>{{ post.text|safe|truncatechars:100}}</h6>
                  </div>
                  <div class="read-more" style="padding:0px 20px 10px 20px;">
                      <a href="{% url 'post_detail' post.id %}" class="btn btn-outline-primary">继续阅读</a>
                  </div>
                  <div class="card-footer bg-light text-dark">
                      {% if post.category %}
                          <div class="category">
                              <img src="/media/icons/icons8-category-40px-1.png" width="20" height="20">
                              <span class="badge badge-success"><a href="{% url 'archives_category' post.category.name %}" style="color: white; text-decoration: none;">{{ post.category.name }}</a></span>
                        </div>
                      {% endif %}
                      {% if post.tag.all %}
                          <div class="tag">
                              <img src="/media/icons/icons8-tag-64px-1.png" width="20" height="20">
                              {% for t in post.tag.all %}
                              <span class="badge badge-info"><a href="{% url 'archives_tag' t.name %}" style="color: white; text-decoration: none;">{{ t.name }}</a></span>
                              {% endfor %}
                          </div>
                      {% endif %}
                  </div>
              </div>
          {% endif %}
          </div>
          {% endfor %}
      </div>
      <!--<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>-->
      <!--&lt;!&ndash; zhanshi-20191030 &ndash;&gt;-->
      <!--<ins class="adsbygoogle"-->
           <!--style="display:block"-->
           <!--data-ad-client="ca-pub-9496515710476197"-->
           <!--data-ad-slot="6798025641"-->
           <!--data-ad-format="auto"-->
           <!--data-full-width-responsive="true"></ins>-->
      <!--<script>-->
           <!--(adsbygoogle = window.adsbygoogle || []).push({});-->
      <!--</script>-->
      <span class="separator">
          <i class="fas fa-book-reader"></i> 发布日期最近
      </span>
      <hr width="60%" style="border:2px solid #BDB76B;"/>
      <div class="row">
          {% for post in new_posts %}
          <div class="col-lg-4 mb-4">
          {% if post.visiable.name != 'private' or user.is_authenticated %}
              <div class="card h-100">
                  <div class="card-header">
                      {{ post.created_date|date }} - {{post.author}} &ensp;
                      <span class='comment-count'>{{ post.comment_set.count }} 评论</span> &ensp;
                      <span class='view-count'>{{ post.views }} 阅读</span>
                  </div>
                  <div class="card-body">
                      {% if post.visiable.name == 'private' %}
                        <h3><a href="{% url 'post_detail' post.id %}">[private] - {{ post.title }}</a></h3>
                      {% else %}
                        <h3><a href="{% url 'post_detail' post.id %}">{{ post.title }}</a><h3>
                      {% endif %}
                      <h6>{{ post.text|safe|truncatechars:100}}</h6>
                  </div>
                  <div class="read-more" style="padding:0px 20px 10px 20px;">
                      <a href="{% url 'post_detail' post.id %}" class="btn btn-outline-primary">继续阅读</a>
                  </div>
                  <div class="card-footer bg-light text-dark">
                      {% if post.category %}
                          <div class="category">
                              <img src="/media/icons/icons8-category-40px-1.png" width="20" height="20">
                              <span class="badge badge-success"><a href="{% url 'archives_category' post.category.name %}" style="color: white; text-decoration: none;">{{ post.category.name }}</a></span>
                        </div>
                      {% endif %}
                      {% if post.tag.all %}
                          <div class="tag">
                              <img src="/media/icons/icons8-tag-64px-1.png" width="20" height="20">
                              {% for t in post.tag.all %}
                              <span class="badge badge-info"><a href="{% url 'archives_tag' t.name %}" style="color: white; text-decoration: none;">{{ t.name }}</a></span>
                              {% endfor %}
                          </div>
                      {% endif %}
                  </div>
              </div>
          {% endif %}
          </div>
          {% endfor %}
      </div>
      <span class="separator"><a href="{% url 'post_list' %}">所有文章 ></a></span>
      <span class="separator">&ensp;</span>
      <span class="separator">
          <i class="fas fa-tags"></i> 访问量最多的文章标签
      </span>
      <hr width="60%" style="border:2px solid #BDB76B;"/>
     <div class="row">
          {% for top_tag in top_tags %}
          <div class="col-lg-2 mb-2" align="center">
              <span class="badge badge-info" style="font-size: 100%;"><a href="{% url 'archives_tag' top_tag %}" style="color: white; text-decoration: none;">{{ top_tag }}</a></span>
          </div>
          {% endfor %}
      </div>
        {% if device_type != 'mobile' %}
        <div class="row">
            <div class="col-lg-4 md-4">
                <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                <!-- zhanshi-20191030 -->
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-9496515710476197"
                     data-ad-slot="6798025641"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                     (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>
            <div class="col-lg-4 md-4">
                <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                <!-- zhanshi-20191030 -->
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-9496515710476197"
                     data-ad-slot="6798025641"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                     (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>
            <div class="col-lg-4 md-4">
                <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                <!-- zhanshi-20191030 -->
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-9496515710476197"
                     data-ad-slot="6798025641"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                     (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>
        </div>
        {% else %}
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <!-- zhanshi-20191030 -->
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-9496515710476197"
             data-ad-slot="6798025641"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
        {% endif %}
    </div>
<script type="text/javascript">
    document.title = '首页 - ' + document.title;
</script>
{% endblock %}
